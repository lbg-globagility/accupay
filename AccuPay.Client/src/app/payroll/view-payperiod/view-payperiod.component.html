<<<<<<< Updated upstream
<h1>View Payperiod</h1>
<h3>
=======
<h1 class="mat-headline">View Payperiod</h1>
<h3 class="font-medium mb-4">
>>>>>>> Stashed changes
  {{ payPeriod?.cutoffStart | date }} to {{ payPeriod?.cutoffEnd | date }}
</h3>

<div class="mb-4">
  <button mat-raised-button (click)="calculate()">CALCULATE</button>
  <button
    mat-raised-button
    (click)="downloadFile()"
    style="margin-left: 10px;"
    mat-raised-button
    color="accent"
  >
    DOWNLOAD PAYSLIP
  </button>
</div>

<h3 class="font-medium mb-4">Paystubs</h3>
<table
  mat-table
  [dataSource]="dataSource"
  multiTemplateDataRows
  class="mat-elevation-z1 w-full"
>
  <ng-container matColumnDef="employee">
    <th mat-header-cell *matHeaderCellDef>Employee</th>
    <td mat-cell *matCellDef="let paystub">
      <div class="flex items-center">
        <img
          class="block rounded-full"
          height="40"
          appImgFallback
          src="/api/employees/{{ paystub?.employeeId }}/image"
        />
        <div class="ml-2">
          <a routerLink="/employees/{{ paystub.employeeId }}">
            <div>{{ paystub.fullName | ifEmpty }}</div>
          </a>
          <div class="text-xs mt-2">#{{ paystub.employeeNo | ifEmpty }}</div>
        </div>
      </div>
    </td>
  </ng-container>

  <ng-container matColumnDef="grossPay">
    <th mat-header-cell *matHeaderCellDef>Gross Pay</th>
    <td mat-cell *matCellDef="let paystub">
      {{ paystub.grossPay | number: "1.2-2" }}
    </td>
  </ng-container>

  <ng-container matColumnDef="netPay">
    <th mat-header-cell *matHeaderCellDef>Net Pay</th>
    <td mat-cell *matCellDef="let paystub">
      {{ paystub.netPay | number: "1.2-2" }}
    </td>
  </ng-container>

  <ng-container matColumnDef="expandedDetail">
    <td
      mat-cell
      *matCellDef="let paystub"
      [attr.colspan]="displayedColumns.length"
    >
      <div app-expandable-row [expanded]="expandedPaystub === paystub">
        <app-paystub-details [paystub]="paystub"></app-paystub-details>
      </div>
    </td>
  </ng-container>

  <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
  <tr
    mat-row
    *matRowDef="let row; columns: displayedColumns; let paystub"
    appExpandableRowTrigger
    (click)="toggleExpansion(row)"
    [ngClass]="{ 'row-outline': expandedPaystub === paystub }"
  ></tr>
  <tr
    mat-row
    *matRowDef="let row; columns: ['expandedDetail']; let paystub"
    appExpandableRowContainer
    [ngClass]="{ 'row-outline': expandedPaystub === paystub }"
  ></tr>
</table>

<div class="app-empty-table" *ngIf="dataSource?.data.length <= 0">
  No paystubs were found.
</div>

<mat-paginator
  [pageIndex]="pageIndex"
  [pageSize]="pageSize"
  [pageSizeOptions]="[10, 5, 25, 100]"
  [length]="totalCount"
  [showFirstLastButtons]="true"
  (page)="onPageChanged($event)"
>
</mat-paginator>
