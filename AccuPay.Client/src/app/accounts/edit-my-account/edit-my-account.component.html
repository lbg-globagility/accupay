<h1>Edit My Account</h1>

<ng-container *ngIf="detail">
  <mat-card>
    <mat-card-content>
      <form [formGroup]="form">
        <div class="row">
          <div class="col-lg-8">
            <div class="uploader">
              <!-- Image preview -->
              <img appImgFallback [src]="imageUrl" class="upload" />

              <!-- File type picker -->
              <input
                type="file"
                hidden="true"
                #image
                (change)="onSelect(image.files); image.value = null"
                accept="image/jpeg,image/jpg,image/png,image/gif"
              />

              <input type="text" hidden="true" formControlName="image" />

              <button mat-stroked-button class="btn-upload" color="accent" (click)="image.click()">
                UPLOAD PHOTO
              </button>

              <div class="progress" [style.visibility]="currentProgress.isInProgress() ? 'visible' : 'hidden'">
                <span *ngIf="isInProgress()">{{ currentProgress.percentage }}%</span>

                <mat-progress-bar
                  *ngIf="isInProgress()"
                  class="progressbar"
                  color="accent"
                  [value]="currentProgress.percentage"
                >
                </mat-progress-bar>
              </div>
            </div>
          </div>
        </div>

        <div class="row">
          <div class="col-lg-8">
            <!-- First Name -->
            <mat-form-field appearance="outline" color="accent">
              <mat-label>First Name</mat-label>
              <input matInput type="text" autocomplete="off" formControlName="firstName" />
            </mat-form-field>
          </div>

          <div class="col-lg-8">
            <!-- Last Name -->
            <mat-form-field appearance="outline" color="accent">
              <mat-label>Last Name</mat-label>
              <input matInput type="text" autocomplete="off" formControlName="lastName" />
            </mat-form-field>
          </div>

          <div class="col-lg-8">
            <!-- Email -->
            <mat-form-field appearance="outline" color="accent" class="m-readonly">
              <mat-label>Email</mat-label>
              <input matInput type="text" autocomplete="off" formControlName="email" readonly />
            </mat-form-field>
          </div>

          <div class="col-lg-8">
            <!-- Title -->
            <mat-form-field appearance="outline" color="accent">
              <mat-label>Title</mat-label>
              <input matInput type="text" autocomplete="off" formControlName="title" />
            </mat-form-field>
          </div>

          <div class="col-lg-8">
            <!-- Site/Location -->
            <mat-form-field *ngIf="isAdminRole" appearance="outline" color="accent">
              <mat-label>Site/Location</mat-label>
              <input matInput type="text" autocomplete="off" formControlName="location" />
            </mat-form-field>
          </div>

          <div class="col-lg-8">
            <!-- Phone Number -->
            <mat-form-field appearance="outline" color="accent">
              <mat-label>Phone Number</mat-label>
              <input
                matInput
                type="text"
                autocomplete="off"
                formControlName="phoneNumber"
                [value]="phoneNumberValue | phone: 'US'"
              />
            </mat-form-field>
          </div>
        </div>
      </form>
      <div class="row">
        <div class="col-lg-12">
          <button mat-button color="accent" (click)="cancel()">CANCEL</button>
          <button mat-flat-button color="accent" (click)="save()">SAVE CHANGES</button>
        </div>
      </div>
    </mat-card-content>
  </mat-card>
</ng-container>
